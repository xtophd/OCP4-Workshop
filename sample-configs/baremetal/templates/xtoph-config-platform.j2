##
## CUSTOM PLATFORM PROFILES
##

custom_baremetal:

  type: "custom_baremetal"
  description: "Custom baremetal profile good for Dells"

{% raw %}  
  vm:
    name: "{{ xtoph_vars.projectname }}_{{ inventory_hostname_short }}"

  network:
    default:
      description:       "default custom_baremetal network parameters"
      basedomain:        "{{ workshop_vars.network_basedomain }}"
      network:           "{{ workshop_vars.network_network    }}"
      netmask:           "{{ workshop_vars.network_netmask    }}"
      broadcast:         "{{ workshop_vars.network_broadcast  }}"
      prefix:            "{{ workshop_vars.network_prefix     }}"
      gateway:           "{{ workshop_vars.network_gateway    }}"
      nameserver:        "{{ workshop_vars.network_nameserver }}"
      timeserver:        "{{ workshop_vars.network_timeserver }}"
      fqdn:              "{{ workshop_extras.network_fqdn     }}"
{% endraw %}

  storage:
    default:
      description:       "default baremetal storage parameters"
      noop:              "noop value to force list for lookup"



custom_kvmhost:

    type:        "{{ t_virthost_type }}"
    host_fqdn:   "{{ t_virthost_fqdn }}"
    host_ip:     "{{ t_virthost_ip   }}"
    description: "Custom kvm platform host: bridged net, nested_virt"

    vm:
        name: {% raw %}"{{ xtoph_vars.projectname }}_{{ inventory_hostname_short }}"{% endraw %}
  
    nested_virt_enable: true

    kickstart:
        description: "hints to where installers can find devices"
{% raw %}  
        netdev:  "{{ h_netDEV | default('eno1') }}"
        blkdev:  "{{ h_blkDEV | default('sda') }}"
{% endraw %}
  
    network:
        default:
  
            description:     "default libvirt network parameters"
            undeploy:        true
{% if t_virthost_br_type is defined and t_virthost_br_type == 'macvtap' %}
            network_name:    "{% raw %}{{ {% endraw %}\"{{ t_project_name }}\"|checksum|truncate(10,true,'') + {% raw %}\"{{ inventory_hostname }}\"{% endraw %}|checksum|truncate(10,true,''){% raw %} }}{% endraw %}"
{% else %}
            network_name:    "br0"
{% endif %}




            fwd_type:        "{{ t_virthost_br_type }}"
            bridge_netdev:   "{{ t_virthost_br_dev }}"
            model:           "virtio"

{% raw %}  
            basedomain:        "{{ workshop_vars.network_basedomain }}"
            network:           "{{ workshop_vars.network_network    }}"
            netmask:           "{{ workshop_vars.network_netmask    }}"
            broadcast:         "{{ workshop_vars.network_broadcast  }}"
            prefix:            "{{ workshop_vars.network_prefix     }}"
            gateway:           "{{ workshop_vars.network_gateway    }}"
            nameserver:        "{{ workshop_vars.network_nameserver }}"
            timeserver:        "{{ workshop_vars.network_timeserver }}"
            fqdn:              "{{ workshop_extras.network_fqdn     }}"
{% endraw %}

    storage:
        default:

            description: "default libvirt storage parameters"
            qcow_dir: "/home/virt-images"


